{"version":3,"file":"scripts/897.1fd9eac.js","mappings":"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","sources":["webpack://kdm-reference/./src/enums/hit-locations.ts","webpack://kdm-reference/./src/utils/strings.ts","webpack://kdm-reference/./src/components/card-list.vue?45b1","webpack://kdm-reference/./src/components/card-list.vue","webpack://kdm-reference/./src/components/vuex-component.ts","webpack://kdm-reference/./src/components/card-list.vue?21d7"],"sourcesContent":["export enum HitLocations {\n    Head = 'head',\n    Body = 'body',\n    Arms = 'arms',\n    Waist = 'waist',\n    Legs = 'legs',\n}\n\nexport default HitLocations\n","export function trim(str: string) {\n    return str.replace(/^ +/mg, '')\n        .replace(/ +$/mg, '')\n        .split(/\\n{2,}/)\n        .map(p => p.replace(/\\n/mg, ' ').trim())\n        .filter(Boolean)\n        .join('\\n')\n}\n","import { vModelCheckbox as _vModelCheckbox, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"component\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"container-fluid\"\n}\nconst _hoisted_3 = { class: \"custom-switch\" }\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"custom-control-label\" }, \"Toggle Roll Indicators\", -1 /* HOISTED */)\nconst _hoisted_5 = { class: \"custom-switch\" }\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"span\", { class: \"custom-control-label\" }, \"Sort by Severity\", -1 /* HOISTED */)\nconst _hoisted_7 = { class: \"list-inline card-list\" }\nconst _hoisted_8 = [\"src\", \"alt\", \"title\"]\nconst _hoisted_9 = {\n  key: 1,\n  class: \"roll\"\n}\nconst _hoisted_10 = [\"innerHTML\"]\nconst _hoisted_11 = [\"innerHTML\"]\nconst _hoisted_12 = {\n  key: 2,\n  class: \"location\"\n}\nconst _hoisted_13 = [\"src\", \"alt\", \"title\"]\nconst _hoisted_14 = [\"innerHTML\"]\nconst _hoisted_15 = [\"innerHTML\"]\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"record-archive\" }, [\n  /*#__PURE__*/_createElementVNode(\"p\", null, [\n    /*#__PURE__*/_createElementVNode(\"i\", null, \"📝\"),\n    /*#__PURE__*/_createTextVNode(),\n    /*#__PURE__*/_createElementVNode(\"span\", { class: \"keyword\" }, \"Record\"),\n    /*#__PURE__*/_createTextVNode(\" and archive.\")\n  ])\n], -1 /* HOISTED */)\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (_ctx.stateKey)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"label\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.dice) = $event)),\n                class: \"custom-control-input\",\n                type: \"checkbox\"\n              }, null, 512 /* NEED_PATCH */), [\n                [_vModelCheckbox, _ctx.dice]\n              ]),\n              _hoisted_4\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createElementVNode(\"label\", null, [\n              _withDirectives(_createElementVNode(\"input\", {\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.severity) = $event)),\n                class: \"custom-control-input\",\n                type: \"checkbox\"\n              }, null, 512 /* NEED_PATCH */), [\n                [_vModelCheckbox, _ctx.severity]\n              ]),\n              _hoisted_6\n            ])\n          ])\n        ]))\n      : _createCommentVNode(\"v-if\", true),\n    _createElementVNode(\"ul\", _hoisted_7, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.cards, (card) => {\n        return (_openBlock(), _createElementBlock(\"li\", {\n          class: _normalizeClass([\"list-inline-item card-md\", [_ctx.listItemClass]])\n        }, [\n          (card.crest?.image)\n            ? (_openBlock(), _createElementBlock(\"div\", {\n                key: 0,\n                class: _normalizeClass([\"expansion\", ([\n            ...(card.crest.color ? [] : ['nobg']),\n            ...(card.crest.hidden ? ['hidden'] : []),\n          ]) as string[]]),\n                style: _normalizeStyle({ 'background-color': card.crest.color })\n              }, [\n                _createElementVNode(\"img\", {\n                  src: card.crest.image,\n                  alt: card.crestText,\n                  title: card.crestText\n                }, null, 8 /* PROPS */, _hoisted_8)\n              ], 6 /* CLASS, STYLE */))\n            : _createCommentVNode(\"v-if\", true),\n          (_ctx.dice && card.roll)\n            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, [\n                _createElementVNode(\"span\", {\n                  innerHTML: card.roll\n                }, null, 8 /* PROPS */, _hoisted_10)\n              ]))\n            : _createCommentVNode(\"v-if\", true),\n          _createElementVNode(\"p\", {\n            class: \"name\",\n            style: _normalizeStyle(card.nameStyle),\n            innerHTML: card.name\n          }, null, 12 /* STYLE, PROPS */, _hoisted_11),\n          (card.image)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                _createElementVNode(\"img\", {\n                  src: card.image,\n                  alt: card.location,\n                  title: card.location\n                }, null, 8 /* PROPS */, _hoisted_13)\n              ]))\n            : _createCommentVNode(\"v-if\", true),\n          (card.caption)\n            ? (_openBlock(), _createElementBlock(\"p\", {\n                key: 3,\n                class: \"caption\",\n                innerHTML: card.caption\n              }, null, 8 /* PROPS */, _hoisted_14))\n            : _createCommentVNode(\"v-if\", true),\n          _createElementVNode(\"p\", {\n            class: \"description\",\n            innerHTML: card.description\n          }, null, 8 /* PROPS */, _hoisted_15),\n          _hoisted_16\n        ], 2 /* CLASS */))\n      }), 256 /* UNKEYED_FRAGMENT */))\n    ])\n  ]))\n}","<template>\n  <div class=\"component\">\n    <div v-if=\"stateKey\" class=\"container-fluid\">\n      <div class=\"custom-switch\">\n        <label>\n          <input v-model=\"dice\" class=\"custom-control-input\" type=\"checkbox\">\n          <span class=\"custom-control-label\">Toggle Roll Indicators</span>\n        </label>\n      </div>\n      <div class=\"custom-switch\">\n        <label>\n          <input v-model=\"severity\" class=\"custom-control-input\" type=\"checkbox\">\n          <span class=\"custom-control-label\">Sort by Severity</span>\n        </label>\n      </div>\n    </div>\n    <ul class=\"list-inline card-list\">\n      <li v-for=\"card in cards\" class=\"list-inline-item card-md\" :class=\"[listItemClass]\">\n        <div\n          v-if=\"card.crest?.image\" class=\"expansion\"\n          :class=\"([\n            ...(card.crest.color ? [] : ['nobg']),\n            ...(card.crest.hidden ? ['hidden'] : []),\n          ]) as string[]\"\n          :style=\"{ 'background-color': card.crest.color }\"\n        >\n          <img :src=\"card.crest.image\" :alt=\"card.crestText\" :title=\"card.crestText\">\n        </div>\n        <p v-if=\"dice && card.roll\" class=\"roll\">\n          <span v-html=\"card.roll\" />\n        </p>\n        <p class=\"name\" :style=\"card.nameStyle\" v-html=\"card.name\" />\n        <div v-if=\"card.image\" class=\"location\">\n          <img :src=\"card.image\" :alt=\"card.location\" :title=\"card.location\">\n        </div>\n        <p v-if=\"card.caption\" class=\"caption\" v-html=\"card.caption\" />\n        <p class=\"description\" v-html=\"card.description\" />\n        <div class=\"record-archive\">\n          <p><i>📝</i> <span class=\"keyword\">Record</span> and archive.</p>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { PropType } from 'vue'\nimport { Component, Prop, Watch } from 'vue-facing-decorator'\nimport { CardItem } from 'components/card-list'\nimport VuexComponent from 'components/vuex-component'\n\ninterface TemplateCardItem extends CardItem {\n  crestText?: string\n  nameStyle?: Record<string, string>\n}\n\n// @vue/component\n@Component\nexport default class extends VuexComponent {\n  @Prop() readonly stateKey?: string\n  @Prop({ type: Array as PropType<CardItem[]>, required: true }) readonly items!: CardItem[]\n  @Prop() readonly listItemClass?: string\n  dice = false\n  severity = false\n\n  created() {\n    if ( ! this.stateKey) {\n      return\n    }\n    this._stateKey = this.stateKey\n    super.created()\n    Object.assign(this, this.getComponentGlobalStateMany({\n      dice: this.dice,\n      severity: this.severity,\n    }))\n  }\n\n  get cards(): TemplateCardItem[] {\n    return Object.values(this.items).map(item => {\n      const nameStyle: Record<string, string> = {}\n      const name = item.name.replace(/\\[([^\\]]+)\\]/g, '$1')\n      if (item.crest && name.length > 16) {\n        nameStyle.paddingLeft = '3rem'\n      }\n      const highlight = name !== item.name\n      if (highlight && item.crest?.color) {\n        nameStyle.color = item.crest.color\n      }\n      // todo use story event placeholder image\n      const crestImage = item.crest?.image ?? ''\n      return {\n        crestText: item.crest?.name ? `${item.crest.name} Expansion` : undefined,\n        crest: item.crest,\n        location: item.location[0].toUpperCase() + item.location.slice(1),\n        nameStyle,\n        name,\n        image: item.image,\n        caption: item.caption?.replace(/\\[([^\\]]+)\\]/g, '<b>$1</b>').replace(/\\n/mg, '</p><p>'),\n        description: item.description\n            .replace(/\\[endeavor\\]/g, '<i title=\"endeavor\">✪</i>')\n            .replace(/\\[monster:([^\\]]+)\\]/g, `<span class=\"text-nowrap\"><img class=\"crest\" src=\"${crestImage}\" alt=\"monster action\" title=\"monster action\" /> <b>$1</b></span>`)\n            .replace(/\\[movement\\]/g, '<i title=\"movement\">♘</i>')\n            .replace(/\\[story:([^\\]]+)\\]/g, '<i class=\"text-nowrap\" title=\"story event\">📖<b> $1</b></i>')\n            .replace(/\\[([^\\]]+)\\]/g, '<b>$1</b>')\n            .replace(/\\n/mg, '</p><p>'),\n        roll: item.roll,\n      }\n    }).sort((a: CardItem, b: CardItem): number => {\n      if (this.severity) {\n        // todo sort by roll\n        return 0\n      }\n      return a.name.localeCompare(b.name)\n    })\n  }\n\n  @Watch('dice')\n  onDiceChanged(value: boolean) {\n    this.setComponentGlobalState('dice', value)\n  }\n\n  @Watch('severity')\n  onSeverityChanged(value: boolean) {\n    this.setComponentGlobalState('severity', value)\n  }\n}\n</script>\n","import { Vue } from 'vue-facing-decorator'\nimport type { RecordValueState } from 'store'\n\nexport default class VuexComponent extends Vue {\n    protected _stateKey = this.constructor.name\n\n    created(): void {\n        if ( ! (this._stateKey in this.$store.state)) {\n            this.$store.commit('update', {\n                [this._stateKey]: {},\n            })\n        }\n    }\n\n    protected getComponentGlobalStateMany(props: { [key: string]: unknown }) {\n        for (const [k, v] of Object.entries(props)) {\n            props[k] = this.getComponentGlobalState(k, v)\n        }\n        return props\n    }\n\n    protected getComponentGlobalState(): RecordValueState\n    protected getComponentGlobalState<T>(property: string, fallback?: T): T | undefined\n    protected getComponentGlobalState<T>(property: string, fallback: T): T\n\n    protected getComponentGlobalState<T>(property?: string, fallback?: T) {\n        const state = this.$store.state[this._stateKey]\n        if ( ! state || ! property) {\n            return fallback\n        }\n        return property in state ? state[property] : fallback\n    }\n\n    protected setComponentGlobalState<T>(property: string, value: T) {\n        this.$store.commit('update', {\n            [this._stateKey]: {\n                [property]: value,\n            },\n        })\n    }\n}\n","import { render } from \"./card-list.vue?vue&type=template&id=659052de&ts=true\"\nimport script from \"./card-list.vue?vue&type=script&lang=ts\"\nexport * from \"./card-list.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["HitLocations","trim","str","replace","split","map","p","filter","Boolean","join","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","VuexComponent","_stateKey","this","constructor","name","created","$store","state","commit","getComponentGlobalStateMany","props","k","v","Object","entries","getComponentGlobalState","property","fallback","setComponentGlobalState","value","dice","severity","stateKey","super","assign","cards","values","items","item","nameStyle","crest","length","paddingLeft","color","crestImage","image","crestText","undefined","location","toUpperCase","slice","caption","description","roll","sort","a","b","localeCompare","onDiceChanged","onSeverityChanged","type","Array","required","_ctx","_cache","$props","$setup","$data","$options","card","listItemClass","style","src","alt","title"],"sourceRoot":""}